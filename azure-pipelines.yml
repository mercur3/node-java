
###############################################################################
# WARNING                                                                     #
# This file is autogenerated. Do NOT edit this file. Run =./build.py= instead #
###############################################################################

trigger:
  - master
pr:
  autoCancel: true
  branches:
    include:
      - master
pool:
  vmImage: ubuntu-latest
jobs:
  - job:
    displayName: Building image on Fedora 41, Java 21
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          echo "------------------------------------------------------\n"
          sed "s/__src_tag_name__/fedora:41/g" -i Dockerfile
          sed "s/__java_version__/21/g" -i Dockerfile
          cat Dockerfile
        displayName: Adding the version

      - task: Docker@2
        displayName: Build & Push Node‚ÄêJava Image
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        inputs:
          command: buildAndPush
          containerRegistry: docker-hub-login
          repository: mercur3/node-java
          Dockerfile: Dockerfile
          tags: |
            fedora41-java21
            latest


