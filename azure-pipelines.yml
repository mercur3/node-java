
###############################################################################
# WARNING                                                                     #
# This file is autogenerated. Do NOT edit this file. Run =./build.py= instead #
###############################################################################

trigger:
  - master
pr:
  autoCancel: true
  branches:
    include:
      - master
pool:
  vmImage: ubuntu-latest
jobs:
  - job:
    displayName: Building image on Debian bullseye, Java 11, Node 16
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          echo "------------------------------------------------------\n"
          sed "s/__src_tag_name__/node:16-bullseye/g" -i Dockerfile
          sed "s/__java_version__/11/g" -i Dockerfile
          cat Dockerfile
        displayName: Adding the version

      - script: |
          set -e
          docker build -f Dockerfile -t mercur3/node-java:node16-java11-bullseye .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/node-java:node16-java11-bullseye .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/node-java:node16-java11-bullseye
        displayName: docker push mercur3/node-java:node16-java11-bullseye
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building image on Debian bullseye, Java 11, Node 18
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          echo "------------------------------------------------------\n"
          sed "s/__src_tag_name__/node:18-bullseye/g" -i Dockerfile
          sed "s/__java_version__/11/g" -i Dockerfile
          cat Dockerfile
        displayName: Adding the version

      - script: |
          set -e
          docker build -f Dockerfile -t mercur3/node-java:node18-java11-bullseye .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/node-java:node18-java11-bullseye .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/node-java:node18-java11-bullseye
        displayName: docker push mercur3/node-java:node18-java11-bullseye
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building image on Debian bullseye, Java 11, Node 19
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          echo "------------------------------------------------------\n"
          sed "s/__src_tag_name__/node:19-bullseye/g" -i Dockerfile
          sed "s/__java_version__/11/g" -i Dockerfile
          cat Dockerfile
        displayName: Adding the version

      - script: |
          set -e
          docker build -f Dockerfile -t mercur3/node-java:node19-java11-bullseye .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/node-java:node19-java11-bullseye .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/node-java:node19-java11-bullseye
        displayName: docker push mercur3/node-java:node19-java11-bullseye
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building image on Debian bullseye, Java 11, Node 20
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          echo "------------------------------------------------------\n"
          sed "s/__src_tag_name__/node:20-bullseye/g" -i Dockerfile
          sed "s/__java_version__/11/g" -i Dockerfile
          cat Dockerfile
        displayName: Adding the version

      - script: |
          set -e
          docker build -f Dockerfile -t mercur3/node-java:node20-java11-bullseye .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/node-java:node20-java11-bullseye .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/node-java:node20-java11-bullseye
        displayName: docker push mercur3/node-java:node20-java11-bullseye
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building image on Debian bullseye, Java 17, Node 16
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          echo "------------------------------------------------------\n"
          sed "s/__src_tag_name__/node:16-bullseye/g" -i Dockerfile
          sed "s/__java_version__/17/g" -i Dockerfile
          cat Dockerfile
        displayName: Adding the version

      - script: |
          set -e
          docker build -f Dockerfile -t mercur3/node-java:node16-java17-bullseye .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/node-java:node16-java17-bullseye .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/node-java:node16-java17-bullseye
        displayName: docker push mercur3/node-java:node16-java17-bullseye
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building image on Debian bullseye, Java 17, Node 18
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          echo "------------------------------------------------------\n"
          sed "s/__src_tag_name__/node:18-bullseye/g" -i Dockerfile
          sed "s/__java_version__/17/g" -i Dockerfile
          cat Dockerfile
        displayName: Adding the version

      - script: |
          set -e
          docker build -f Dockerfile -t mercur3/node-java:node18-java17-bullseye .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/node-java:node18-java17-bullseye .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/node-java:node18-java17-bullseye
        displayName: docker push mercur3/node-java:node18-java17-bullseye
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building image on Debian bullseye, Java 17, Node 19
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          echo "------------------------------------------------------\n"
          sed "s/__src_tag_name__/node:19-bullseye/g" -i Dockerfile
          sed "s/__java_version__/17/g" -i Dockerfile
          cat Dockerfile
        displayName: Adding the version

      - script: |
          set -e
          docker build -f Dockerfile -t mercur3/node-java:node19-java17-bullseye .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/node-java:node19-java17-bullseye .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/node-java:node19-java17-bullseye
        displayName: docker push mercur3/node-java:node19-java17-bullseye
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


  - job:
    displayName: Building image on Debian bullseye, Java 17, Node 20
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: |
          echo "Building the images"
          printf "Using %d threads\n" $(nproc)
          echo "------------------------------------------------------\n"
          sed "s/__src_tag_name__/node:20-bullseye/g" -i Dockerfile
          sed "s/__java_version__/17/g" -i Dockerfile
          cat Dockerfile
        displayName: Adding the version

      - script: |
          set -e
          docker build -f Dockerfile -t mercur3/node-java:node20-java17-bullseye .
          echo "------------------------------------------------------\n"
        displayName: docker build -f Dockerfile -t mercur3/node-java:node20-java17-bullseye .

      - script: |
          echo "------------------------------------------------------\n"
          echo "$DOCKER_PASSWORD" | docker login -u mercur3 --password-stdin
          docker push mercur3/node-java:node20-java17-bullseye
        displayName: docker push mercur3/node-java:node20-java17-bullseye
        condition: not(eq(variables['Build.Reason'], 'PullRequest'))
        env:
          DOCKER_PASSWORD: $(DOCKER_PASSWORD)


